# Elastic Operations IA Demo  

### DATA SOURCE 

The SOURCE type of stack will be used for any data being ingested into Snowflake from an external source.

**Create Database(s):**


* `S_{SOURCE_NAME}_DB`
    * **Schemas:**
        * RAW
        * CLEAN
        * MODELED
        * CONSUME

**Create Access Roles:**
* `_DR_S_{SOURCE_NAME}_RO`
* `_DR_S_{SOURCE_NAME}_RW`
* `_DR_S_{SOURCE_NAME}_CONSUME`


### DATA PRODUCT

The PRODUCT type of stack will be used for any data being created from one or many SOURCE databases.  

**Create Database(s):**

* `P_{PRODUCT_NAME}_DB`
    * **Schemas:**
        * INTEGRATION
        * MODELED
        * CONSUME

**Create Access Roles:**

* `_DR_P_{PRODUCT_NAME}_RO`
* `_DR_P_{PRODUCT_NAME}_RW`
* `_DR_P_{PRODUCT_NAME}_CONSUME`

### FUNCTIONAL ROLES

These are Functional Roles for reporting tools, service accounts, or users. 


**Create Functional Roles:**

* `FR_{USE CASE OR GROUP}`
    * Granted Roles:
        * For each PRODUCT they need to work with:
            * `_DR_P_{PRODUCT_NAME}_{RO|RW|CONSUME}` 
        * For each SOURCE they need to work with:
            * `_DR_S_{SOURCE_NAME}_{RO|RW|CONSUME}` 
        * For each Warehouse they can run queries on:
            * `_AR_{WAREHOUSE_NAME}_WH_USE`

### USERS / SERVICE ACCOUNTS  
Ideally users are provisioned and managed by SCIM, this stack may only be managing service accounts.    

**Create Users / Service Accounts:**

* `SVC_DBT`

### WAREHOUSES

Stack for provisioning warehouses with accompanying access role.

**Create Warehouses:**  
* `SHARED_MAINTENANCE_WH`
* `SHARED_INGEST_WH`
* `SHARED_ANALYTICS_WH`


**Create Access Roles:**
* `_AR_SHARED_MAINTENANCE_WH_USE`
* `_AR_SHARED_INGEST_WH_USE`
* `_AR_SHARED_ANALYTICS_WH_USE`

--- 

```shell
Provision Plan
**********************************************************************
SQL Commands by Type
CREATE: 57
ALTER: 3
GRANT: 194

Commands by Resource Set (+ Create, Δ Modify, - Destroy)
------------------------------
group file: elastic-ops-ia-template/groups/data-product.yaml
group entry index: 0
template file: elastic-ops-ia-template/templates/data-product.yaml

DATABASE
    (+) CREATE DATABASE IF NOT EXISTS P_HR_DB

SCHEMA
    (+) CREATE SCHEMA IF NOT EXISTS P_HR_DB.INTEGRATION
    (+) CREATE SCHEMA IF NOT EXISTS P_HR_DB.MODELED
    (+) CREATE SCHEMA IF NOT EXISTS P_HR_DB.CONSUME

ROLE
    (+) CREATE ROLE IF NOT EXISTS _DR_P_HR_DB_RW
    (+) CREATE ROLE IF NOT EXISTS _DR_P_HR_DB_RO
    (+) CREATE ROLE IF NOT EXISTS _DR_P_HR_DB_CONSUME

PRIVILEGE GRANT
    (+) GRANT USAGE ON DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT USAGE ON DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT USAGE ON DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW WITH GRANT OPTION
    (+) GRANT USAGE ON ALL SCHEMAS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT USAGE ON SCHEMA P_HR_DB.CONSUME TO ROLE _DR_P_HR_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT SELECT ON FUTURE TABLES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT SELECT ON FUTURE TABLES IN SCHEMA P_HR_DB.CONSUME TO ROLE _DR_P_HR_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN SCHEMA P_HR_DB.CONSUME TO ROLE _DR_P_HR_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT SELECT ON FUTURE VIEWS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT SELECT ON FUTURE VIEWS IN SCHEMA P_HR_DB.CONSUME TO ROLE _DR_P_HR_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN SCHEMA P_HR_DB.CONSUME TO ROLE _DR_P_HR_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT MONITOR ON FUTURE TASKS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT READ ON FUTURE STAGES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE P_HR_DB TO ROLE _DR_P_HR_DB_RW

ROLE GRANT
    (+) GRANT ROLE _DR_P_HR_DB_RO TO ROLE _DR_P_HR_DB_RW
    (+) GRANT ROLE _DR_P_HR_DB_RW TO ROLE SYSADMIN
------------------------------
group file: elastic-ops-ia-template/groups/data-product.yaml
group entry index: 1
template file: elastic-ops-ia-template/templates/data-product.yaml

DATABASE
    (+) CREATE DATABASE IF NOT EXISTS P_SALES_DB

SCHEMA
    (+) CREATE SCHEMA IF NOT EXISTS P_SALES_DB.INTEGRATION
    (+) CREATE SCHEMA IF NOT EXISTS P_SALES_DB.MODELED
    (+) CREATE SCHEMA IF NOT EXISTS P_SALES_DB.CONSUME

ROLE
    (+) CREATE ROLE IF NOT EXISTS _DR_P_SALES_DB_RW
    (+) CREATE ROLE IF NOT EXISTS _DR_P_SALES_DB_RO
    (+) CREATE ROLE IF NOT EXISTS _DR_P_SALES_DB_CONSUME

PRIVILEGE GRANT
    (+) GRANT USAGE ON DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT USAGE ON DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT USAGE ON DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW WITH GRANT OPTION
    (+) GRANT USAGE ON ALL SCHEMAS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT USAGE ON SCHEMA P_SALES_DB.CONSUME TO ROLE _DR_P_SALES_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT SELECT ON FUTURE TABLES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT SELECT ON FUTURE TABLES IN SCHEMA P_SALES_DB.CONSUME TO ROLE _DR_P_SALES_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN SCHEMA P_SALES_DB.CONSUME TO ROLE _DR_P_SALES_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT SELECT ON FUTURE VIEWS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT SELECT ON FUTURE VIEWS IN SCHEMA P_SALES_DB.CONSUME TO ROLE _DR_P_SALES_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN SCHEMA P_SALES_DB.CONSUME TO ROLE _DR_P_SALES_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT MONITOR ON FUTURE TASKS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT READ ON FUTURE STAGES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE P_SALES_DB TO ROLE _DR_P_SALES_DB_RW

ROLE GRANT
    (+) GRANT ROLE _DR_P_SALES_DB_RO TO ROLE _DR_P_SALES_DB_RW
    (+) GRANT ROLE _DR_P_SALES_DB_RW TO ROLE SYSADMIN
------------------------------
group file: elastic-ops-ia-template/groups/data-product.yaml
group entry index: 2
template file: elastic-ops-ia-template/templates/data-product.yaml

DATABASE
    (+) CREATE DATABASE IF NOT EXISTS P_PMO_DB

SCHEMA
    (+) CREATE SCHEMA IF NOT EXISTS P_PMO_DB.INTEGRATION
    (+) CREATE SCHEMA IF NOT EXISTS P_PMO_DB.MODELED
    (+) CREATE SCHEMA IF NOT EXISTS P_PMO_DB.CONSUME

ROLE
    (+) CREATE ROLE IF NOT EXISTS _DR_P_PMO_DB_RW
    (+) CREATE ROLE IF NOT EXISTS _DR_P_PMO_DB_RO
    (+) CREATE ROLE IF NOT EXISTS _DR_P_PMO_DB_CONSUME

PRIVILEGE GRANT
    (+) GRANT USAGE ON DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT USAGE ON DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT USAGE ON DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW WITH GRANT OPTION
    (+) GRANT USAGE ON ALL SCHEMAS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT USAGE ON SCHEMA P_PMO_DB.CONSUME TO ROLE _DR_P_PMO_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT SELECT ON FUTURE TABLES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT SELECT ON FUTURE TABLES IN SCHEMA P_PMO_DB.CONSUME TO ROLE _DR_P_PMO_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN SCHEMA P_PMO_DB.CONSUME TO ROLE _DR_P_PMO_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT SELECT ON FUTURE VIEWS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT SELECT ON FUTURE VIEWS IN SCHEMA P_PMO_DB.CONSUME TO ROLE _DR_P_PMO_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN SCHEMA P_PMO_DB.CONSUME TO ROLE _DR_P_PMO_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT MONITOR ON FUTURE TASKS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT READ ON FUTURE STAGES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE P_PMO_DB TO ROLE _DR_P_PMO_DB_RW

ROLE GRANT
    (+) GRANT ROLE _DR_P_PMO_DB_RO TO ROLE _DR_P_PMO_DB_RW
    (+) GRANT ROLE _DR_P_PMO_DB_RW TO ROLE SYSADMIN
------------------------------
group file: elastic-ops-ia-template/groups/data-source.yaml
group entry index: 0
template file: elastic-ops-ia-template/templates/data-source.yaml

DATABASE
    (+) CREATE DATABASE IF NOT EXISTS S_SALESFORCE_DB

SCHEMA
    (+) CREATE SCHEMA IF NOT EXISTS S_SALESFORCE_DB.RAW
    (+) CREATE SCHEMA IF NOT EXISTS S_SALESFORCE_DB.CLEAN
    (+) CREATE SCHEMA IF NOT EXISTS S_SALESFORCE_DB.MODELED
    (+) CREATE SCHEMA IF NOT EXISTS S_SALESFORCE_DB.CONSUME

ROLE
    (+) CREATE ROLE IF NOT EXISTS _DR_S_SALESFORCE_DB_RW
    (+) CREATE ROLE IF NOT EXISTS _DR_S_SALESFORCE_DB_RO
    (+) CREATE ROLE IF NOT EXISTS _DR_S_SALESFORCE_DB_CONSUME

PRIVILEGE GRANT
    (+) GRANT USAGE ON DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT USAGE ON DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT USAGE ON DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW WITH GRANT OPTION
    (+) GRANT USAGE ON ALL SCHEMAS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT USAGE ON SCHEMA S_SALESFORCE_DB.CONSUME TO ROLE _DR_S_SALESFORCE_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT SELECT ON FUTURE TABLES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT SELECT ON FUTURE TABLES IN SCHEMA S_SALESFORCE_DB.CONSUME TO ROLE _DR_S_SALESFORCE_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN SCHEMA S_SALESFORCE_DB.CONSUME TO ROLE _DR_S_SALESFORCE_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT SELECT ON FUTURE VIEWS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT SELECT ON FUTURE VIEWS IN SCHEMA S_SALESFORCE_DB.CONSUME TO ROLE _DR_S_SALESFORCE_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN SCHEMA S_SALESFORCE_DB.CONSUME TO ROLE _DR_S_SALESFORCE_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT MONITOR ON FUTURE TASKS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT READ ON FUTURE STAGES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE S_SALESFORCE_DB TO ROLE _DR_S_SALESFORCE_DB_RW

ROLE GRANT
    (+) GRANT ROLE _DR_S_SALESFORCE_DB_RO TO ROLE _DR_S_SALESFORCE_DB_RW
    (+) GRANT ROLE _DR_S_SALESFORCE_DB_RW TO ROLE SYSADMIN
------------------------------
group file: elastic-ops-ia-template/groups/data-source.yaml
group entry index: 1
template file: elastic-ops-ia-template/templates/data-source.yaml

DATABASE
    (+) CREATE DATABASE IF NOT EXISTS S_MAVENLINK_DB

SCHEMA
    (+) CREATE SCHEMA IF NOT EXISTS S_MAVENLINK_DB.RAW
    (+) CREATE SCHEMA IF NOT EXISTS S_MAVENLINK_DB.CLEAN
    (+) CREATE SCHEMA IF NOT EXISTS S_MAVENLINK_DB.MODELED
    (+) CREATE SCHEMA IF NOT EXISTS S_MAVENLINK_DB.CONSUME

ROLE
    (+) CREATE ROLE IF NOT EXISTS _DR_S_MAVENLINK_DB_RW
    (+) CREATE ROLE IF NOT EXISTS _DR_S_MAVENLINK_DB_RO
    (+) CREATE ROLE IF NOT EXISTS _DR_S_MAVENLINK_DB_CONSUME

PRIVILEGE GRANT
    (+) GRANT USAGE ON DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT USAGE ON DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT USAGE ON DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW WITH GRANT OPTION
    (+) GRANT USAGE ON ALL SCHEMAS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT USAGE ON SCHEMA S_MAVENLINK_DB.CONSUME TO ROLE _DR_S_MAVENLINK_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT SELECT ON FUTURE TABLES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT SELECT ON FUTURE TABLES IN SCHEMA S_MAVENLINK_DB.CONSUME TO ROLE _DR_S_MAVENLINK_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN SCHEMA S_MAVENLINK_DB.CONSUME TO ROLE _DR_S_MAVENLINK_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT SELECT ON FUTURE VIEWS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT SELECT ON FUTURE VIEWS IN SCHEMA S_MAVENLINK_DB.CONSUME TO ROLE _DR_S_MAVENLINK_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN SCHEMA S_MAVENLINK_DB.CONSUME TO ROLE _DR_S_MAVENLINK_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT MONITOR ON FUTURE TASKS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT READ ON FUTURE STAGES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE S_MAVENLINK_DB TO ROLE _DR_S_MAVENLINK_DB_RW

ROLE GRANT
    (+) GRANT ROLE _DR_S_MAVENLINK_DB_RO TO ROLE _DR_S_MAVENLINK_DB_RW
    (+) GRANT ROLE _DR_S_MAVENLINK_DB_RW TO ROLE SYSADMIN
------------------------------
group file: elastic-ops-ia-template/groups/data-source.yaml
group entry index: 2
template file: elastic-ops-ia-template/templates/data-source.yaml

DATABASE
    (+) CREATE DATABASE IF NOT EXISTS S_JIRA_DB

SCHEMA
    (+) CREATE SCHEMA IF NOT EXISTS S_JIRA_DB.RAW
    (+) CREATE SCHEMA IF NOT EXISTS S_JIRA_DB.CLEAN
    (+) CREATE SCHEMA IF NOT EXISTS S_JIRA_DB.MODELED
    (+) CREATE SCHEMA IF NOT EXISTS S_JIRA_DB.CONSUME

ROLE
    (+) CREATE ROLE IF NOT EXISTS _DR_S_JIRA_DB_RW
    (+) CREATE ROLE IF NOT EXISTS _DR_S_JIRA_DB_RO
    (+) CREATE ROLE IF NOT EXISTS _DR_S_JIRA_DB_CONSUME

PRIVILEGE GRANT
    (+) GRANT USAGE ON DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT USAGE ON DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT USAGE ON DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW WITH GRANT OPTION
    (+) GRANT USAGE ON ALL SCHEMAS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT USAGE ON SCHEMA S_JIRA_DB.CONSUME TO ROLE _DR_S_JIRA_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT SELECT ON FUTURE TABLES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT SELECT ON FUTURE TABLES IN SCHEMA S_JIRA_DB.CONSUME TO ROLE _DR_S_JIRA_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT SELECT ON FUTURE EXTERNAL TABLES IN SCHEMA S_JIRA_DB.CONSUME TO ROLE _DR_S_JIRA_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT SELECT ON FUTURE VIEWS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT SELECT ON FUTURE VIEWS IN SCHEMA S_JIRA_DB.CONSUME TO ROLE _DR_S_JIRA_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN SCHEMA S_JIRA_DB.CONSUME TO ROLE _DR_S_JIRA_DB_CONSUME
    (+) GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT MONITOR ON FUTURE TASKS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT READ ON FUTURE STAGES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RO
    (+) GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE S_JIRA_DB TO ROLE _DR_S_JIRA_DB_RW

ROLE GRANT
    (+) GRANT ROLE _DR_S_JIRA_DB_RO TO ROLE _DR_S_JIRA_DB_RW
    (+) GRANT ROLE _DR_S_JIRA_DB_RW TO ROLE SYSADMIN
------------------------------
group file: elastic-ops-ia-template/groups/functional-role.yaml
group entry index: 0
template file: elastic-ops-ia-template/templates/functional-role.yaml

ROLE
    (+) CREATE ROLE IF NOT EXISTS FR_DBT

ROLE GRANT
    (+) GRANT ROLE FR_DBT TO ROLE SYSADMIN
    (+) GRANT ROLE FR_DBT TO USER SVC_DBT
    (+) GRANT ROLE FR_DBT TO USER FiLastname1
    (+) GRANT ROLE FR_DBT TO USER FiLastname27
    (+) GRANT ROLE _AR_SHARED_TRANSFORM_WH TO ROLE FR_DBT
    (+) GRANT ROLE _AR_SHARED_INGEST_WH TO ROLE FR_DBT
    (+) GRANT ROLE _DR_S_SALESFORCE_RW TO ROLE FR_DBT
    (+) GRANT ROLE _DR_S_MAVENLINK_RW TO ROLE FR_DBT
    (+) GRANT ROLE _DR_S_JIRA_RW TO ROLE FR_DBT
    (+) GRANT ROLE _DR_P_HR_RW TO ROLE FR_DBT
    (+) GRANT ROLE _DR_P_SALES_RW TO ROLE FR_DBT
    (+) GRANT ROLE _DR_P_PMO_RW TO ROLE FR_DBT
------------------------------
group file: elastic-ops-ia-template/groups/functional-role.yaml
group entry index: 1
template file: elastic-ops-ia-template/templates/functional-role.yaml

ROLE
    (+) CREATE ROLE IF NOT EXISTS FR_TABLEAU

ROLE GRANT
    (+) GRANT ROLE FR_TABLEAU TO ROLE SYSADMIN
    (+) GRANT ROLE FR_TABLEAU TO USER SVC_TABLEAU
    (+) GRANT ROLE _AR_SHARED_CONSUME_WH TO ROLE FR_TABLEAU
    (+) GRANT ROLE _DR_P_SALES_CONSUME TO ROLE FR_TABLEAU
    (+) GRANT ROLE _DR_P_PMO_CONSUME TO ROLE FR_TABLEAU
------------------------------
group file: elastic-ops-ia-template/groups/users.yaml
group entry index: 0
template file: elastic-ops-ia-template/templates/users.yaml

USER
    (+) CREATE USER IF NOT EXISTS SVC_DBT DISPLAY_NAME = null, FIRST_NAME = null, MIDDLE_NAME = null, LAST_NAME = null, EMAIL = 'dbt_developers@phdata.io', MUST_CHANGE_PASSWORD = false, DISABLED = false, PASSWORD = null, DEFAULT_ROLE = FR_DBT, DEFAULT_WAREHOUSE = null, DEFAULT_NAMESPACE = null, DEFAULT_SECONDARY_ROLES = null, RSA_PUBLIC_KEY = 'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvuGVCWRL/8QyI19ZSY8mo9Hy6lnh1VXKxxFjAw5RpkU+gwXD8QCgL0AKHyR1yDbcbFOfslmCzsZ/3Rt/I4upGEXHvAtTgx9RacVoIViCGS2dJ+r+FS5gLu76sUSuRzKDgFo1RhwjY8IuavfPJCSGFc5+PS3g283MpG4XqgKafykfvlRzHRdBEwmSs+OMSFuY3rZBNmKS8fdJqecOrNL83WzrCTZOM9BZRqz9pDM/GHgcqXEBNTuHUgX5H5Tq6+/GIJmLmAO4KoT0LJtye8IYry3I07zzLBcfxfMShNFUAPFJg38+0qYEZDSlpx5iqP/6DcHEeEUDlYxSgdv+zw2HywIDAQAB', RSA_PUBLIC_KEY_2 = null, COMMENT = null, DAYS_TO_EXPIRY = 0
------------------------------
group file: elastic-ops-ia-template/groups/warehouse.yaml
group entry index: 0
template file: elastic-ops-ia-template/templates/warehouse.yaml

RESOURCE MONITOR
    (+) CREATE RESOURCE MONITOR SHARED_INGEST_WH CREDIT_QUOTA = 100, FREQUENCY = MONTHLY, START_TIMESTAMP = IMMEDIATELY TRIGGERS ON 75 PERCENT DO NOTIFY ON 100 PERCENT DO SUSPEND ON 125 PERCENT DO SUSPEND_IMMEDIATE

WAREHOUSE
    (+) CREATE WAREHOUSE IF NOT EXISTS SHARED_INGEST_WH MAX_CLUSTER_COUNT = 1, MIN_CLUSTER_COUNT = 1, SCALING_POLICY = ECONOMY, AUTO_SUSPEND = 60, AUTO_RESUME = true, COMMENT = 'Toolkit Provision', ENABLE_QUERY_ACCELERATION = false, QUERY_ACCELERATION_MAX_SCALE_FACTOR = 8, WAREHOUSE_TYPE = STANDARD, INITIALLY_SUSPENDED = true, MAX_CONCURRENCY_LEVEL = 8, STATEMENT_TIMEOUT_IN_SECONDS = 7200, STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = 1800
    (Δ) ALTER WAREHOUSE IF EXISTS SHARED_INGEST_WH SET RESOURCE_MONITOR = SHARED_INGEST_WH

ROLE
    (+) CREATE ROLE IF NOT EXISTS _AR_SHARED_INGEST_WH

PRIVILEGE GRANT
    (+) GRANT USAGE ON WAREHOUSE SHARED_INGEST_WH TO ROLE _AR_SHARED_INGEST_WH
------------------------------
group file: elastic-ops-ia-template/groups/warehouse.yaml
group entry index: 1
template file: elastic-ops-ia-template/templates/warehouse.yaml

RESOURCE MONITOR
    (+) CREATE RESOURCE MONITOR SHARED_TRANSFORM_WH CREDIT_QUOTA = 300, FREQUENCY = MONTHLY, START_TIMESTAMP = IMMEDIATELY TRIGGERS ON 75 PERCENT DO NOTIFY ON 100 PERCENT DO SUSPEND ON 125 PERCENT DO SUSPEND_IMMEDIATE

WAREHOUSE
    (+) CREATE WAREHOUSE IF NOT EXISTS SHARED_TRANSFORM_WH MAX_CLUSTER_COUNT = 3, MIN_CLUSTER_COUNT = 1, SCALING_POLICY = ECONOMY, AUTO_SUSPEND = 600, AUTO_RESUME = true, COMMENT = 'Toolkit Provision', ENABLE_QUERY_ACCELERATION = false, QUERY_ACCELERATION_MAX_SCALE_FACTOR = 8, WAREHOUSE_TYPE = STANDARD, INITIALLY_SUSPENDED = true, MAX_CONCURRENCY_LEVEL = 8, STATEMENT_TIMEOUT_IN_SECONDS = 14400, STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = 1800
    (Δ) ALTER WAREHOUSE IF EXISTS SHARED_TRANSFORM_WH SET RESOURCE_MONITOR = SHARED_TRANSFORM_WH

ROLE
    (+) CREATE ROLE IF NOT EXISTS _AR_SHARED_TRANSFORM_WH

PRIVILEGE GRANT
    (+) GRANT USAGE ON WAREHOUSE SHARED_TRANSFORM_WH TO ROLE _AR_SHARED_TRANSFORM_WH
------------------------------
group file: elastic-ops-ia-template/groups/warehouse.yaml
group entry index: 2
template file: elastic-ops-ia-template/templates/warehouse.yaml

RESOURCE MONITOR
    (+) CREATE RESOURCE MONITOR SHARED_CONSUME_WH CREDIT_QUOTA = 200, FREQUENCY = MONTHLY, START_TIMESTAMP = IMMEDIATELY TRIGGERS ON 75 PERCENT DO NOTIFY ON 100 PERCENT DO SUSPEND ON 125 PERCENT DO SUSPEND_IMMEDIATE

WAREHOUSE
    (+) CREATE WAREHOUSE IF NOT EXISTS SHARED_CONSUME_WH MAX_CLUSTER_COUNT = 1, MIN_CLUSTER_COUNT = 1, SCALING_POLICY = ECONOMY, AUTO_SUSPEND = 600, AUTO_RESUME = true, COMMENT = 'Toolkit Provision', ENABLE_QUERY_ACCELERATION = false, QUERY_ACCELERATION_MAX_SCALE_FACTOR = 8, WAREHOUSE_TYPE = STANDARD, INITIALLY_SUSPENDED = true, MAX_CONCURRENCY_LEVEL = 8, STATEMENT_TIMEOUT_IN_SECONDS = 7200, STATEMENT_QUEUED_TIMEOUT_IN_SECONDS = 1800
    (Δ) ALTER WAREHOUSE IF EXISTS SHARED_CONSUME_WH SET RESOURCE_MONITOR = SHARED_CONSUME_WH

ROLE
    (+) CREATE ROLE IF NOT EXISTS _AR_SHARED_CONSUME_WH

PRIVILEGE GRANT
    (+) GRANT USAGE ON WAREHOUSE SHARED_CONSUME_WH TO ROLE _AR_SHARED_CONSUME_WH
**********************************************************************
```